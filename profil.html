<!DOCTYPE html>
<html lang="fr">

    <head>
        <meta charset="UTF-8">
        <title>DigitCarte</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <a href="index.html" class="retour"> <i class="fas fa-arrow-left"></i> Retour</a>
        <div id="profil" class="profil">
            <img id="photo" alt="Photo de profil" style="width: 100px; height: 100px;">
            <br>
            <p>Nom :<span id="nom"></span></p>
            <p>Postnom : <span  id="postnom"></span></p>
            <p >Prenom :  <span id="prenom"></span></p>
            <p>Entreprise :<span  id="firm"></span></p>
            <p>Poste : <span  id="job"></span></p>
            <p>Téléphone : <span id="tel"></span></p>
            <p>E-mail : <span  id="mail"></span></p>
            <p>Mot de passe : <span id="password"></span></p>

            <button id="editBtn">Modifier</button>

            <div id="editForm" style="display: none;">
                <input type="text" id="editnom">
                <input type="text" id="editpostnom">
                <input type="text" id="editprenom">
                <input type="text" id="editfirm">
                <input type="text" id="editjob">
                <input type="tel"  id="edittel">
                <input type="mail" id="editmail">
                <input type="password" id="editpassword">
                <input type="file" id="editphoto" accept="image/*"/>
                <button id="saveChanges">Enregistrer</button>

            </div>
        </div>
        <script >
            document.querySelector('#profil').addEventListener('submit', function(e) {
                    e.preventDefault();
                const userData = { 
                        Nom: document.querySelector('#nom').value,
                        Postnom: document.querySelector('#postnom').value,
                        Prenom: document.querySelector('#prenom').value,
                        Entreprise: document.querySelector('#firm').value,
                        poste: document.querySelector('#job').value,
                        Téléphone: document.querySelector('#tel').value,
                        mail: document.querySelector('#mail').value,
                        Motdepasse: document.querySelector('#password').value,
                        Photo: document.querySelector('#photo').value,
                    };
                localStorage.setItem('Utilisateur', JSON.stringify(userData));    
                if (file) {
                    reader.readAsDataURL(file);
                }
                else {
                    alert('Veuillez sélectionner une photo.');
                }
                });
            const userData = JSON.parse(localStorage.getItem('Utilisateur'));
            if (userData) {
                document.querySelector('#nom').textContent = userData.Nom;
                document.querySelector('#postnom').textContent = userData.Postnom;
                document.querySelector('#prenom').textContent = userData.Prenom;
                document.querySelector('#firm').textContent = userData.Entreprise;
                document.querySelector('#job').textContent = userData.poste;
                document.querySelector('#tel').textContent = userData.Téléphone;
                document.querySelector('#mail').textContent = userData.mail;
                document.querySelector('#password').textContent = userData.Motdepasse;

                const photoElement = document.querySelector('#photo');
                if (userData.Photo) {
                    photoElement.src = userData.Photo;
                }
            }

        </script>
    </body>
</html>